{% extends "layout.html" %}

{% block head %}
    <link href="/static/styles/start-streaming.css" rel="stylesheet">
    <link href="/static/styles/chat.css" rel="stylesheet">
{% endblock %}

{% block body %}
    <div class="row h-100">
        <div class="col p-0">
            {% if is_live %}
                <span class="already-live">This stream is already LIVE</span>
            {% endif %}

            <div class="webcam-video-container {{ 'd-none' if is_live }}">
                <video id="webcamVideo" class="webcam-video" autoplay>
                    Your browser does not support the video tag.
                </video>

                <div class="stream-controls p-3">
                    <button id="startStream" type="button" class="btn btn-primary-custom">
                        Start Stream
                    </button>
        
                    <button id="endStream" type="button" class="btn d-none btn-primary-custom">
                        End Stream
                    </button>
                    
                    <div class="view-count-outer me-3">
                        <i class="fa-regular fa-eye"></i>
                        <span id="viewsCount">0</span>
                    </div>
                </div>
            </div>
        </div>
        {% include "chat.html" %}
    </div>

    <script async src="https://docs.opencv.org/master/opencv.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
    <script src='{{ url_for("static", filename="js/helpers.js") }}'></script>
    <!-- <script src='{{ url_for("static", filename="js/stream/broadcast-sockets.js") }}'></script> -->
    <script src='{{ url_for("static", filename="js/stream/broadcast-webrtc.js") }}'></script>
    
    <script src='{{ url_for("static", filename="js/chat.js") }}'></script>
    
{% endblock %}